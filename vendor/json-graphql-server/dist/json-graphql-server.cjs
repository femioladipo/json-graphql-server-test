"use strict";const H=require("xhr-mock"),g=require("graphql"),Tt=require("@graphql-tools/schema"),K=require("inflection"),pe=require("graphql-type-json");var de={},G={},ee={},Ne;function Ye(){if(Ne)return ee;Ne=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.devAssert=e;function e(n,c){if(!!!n)throw new Error(c)}return ee}var te={},ye;function he(){if(ye)return te;ye=1,Object.defineProperty(te,"__esModule",{value:!0}),te.inspect=c;const e=10,n=2;function c(d){return r(d,[])}function r(d,N){switch(typeof d){case"string":return JSON.stringify(d);case"function":return d.name?`[function ${d.name}]`:"[function]";case"object":return s(d,N);default:return String(d)}}function s(d,N){if(d===null)return"null";if(N.includes(d))return"[Circular]";const t=[...N,d];if(u(d)){const l=d.toJSON();if(l!==d)return typeof l=="string"?l:r(l,t)}else if(Array.isArray(d))return m(d,t);return i(d,t)}function u(d){return typeof d.toJSON=="function"}function i(d,N){const t=Object.entries(d);return t.length===0?"{}":N.length>n?"["+E(d)+"]":"{ "+t.map(([y,O])=>y+": "+r(O,N)).join(", ")+" }"}function m(d,N){if(d.length===0)return"[]";if(N.length>n)return"[Array]";const t=Math.min(e,d.length),l=d.length-t,y=[];for(let O=0;O<t;++O)y.push(r(d[O],N));return l===1?y.push("... 1 more item"):l>1&&y.push(`... ${l} more items`),"["+y.join(", ")+"]"}function E(d){const N=Object.prototype.toString.call(d).replace(/^\[object /,"").replace(/]$/,"");if(N==="Object"&&typeof d.constructor=="function"){const t=d.constructor.name;if(typeof t=="string"&&t!=="")return t}return N}return te}var W={},me;function Et(){if(me)return W;me=1,Object.defineProperty(W,"__esModule",{value:!0}),W.instanceOf=void 0;var e=he();const c=globalThis.process&&process.env.NODE_ENV==="production"?function(s,u){return s instanceof u}:function(s,u){if(s instanceof u)return!0;if(typeof s=="object"&&s!==null){var i;const m=u.prototype[Symbol.toStringTag],E=Symbol.toStringTag in s?s[Symbol.toStringTag]:(i=s.constructor)===null||i===void 0?void 0:i.name;if(m===E){const d=(0,e.inspect)(s);throw new Error(`Cannot use ${m} "${d}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};return W.instanceOf=c,W}var Oe;function Je(){if(Oe)return G;Oe=1,Object.defineProperty(G,"__esModule",{value:!0}),G.Source=void 0,G.isSource=s;var e=Ye(),n=he(),c=Et();class r{constructor(i,m="GraphQL request",E={line:1,column:1}){typeof i=="string"||(0,e.devAssert)(!1,`Body must be a string. Received: ${(0,n.inspect)(i)}.`),this.body=i,this.name=m,this.locationOffset=E,this.locationOffset.line>0||(0,e.devAssert)(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||(0,e.devAssert)(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}G.Source=r;function s(u){return(0,c.instanceOf)(u,r)}return G}var ne={},ie={},ve;function Nt(){if(ve)return ie;ve=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.invariant=e;function e(n,c){if(!!!n)throw new Error(c??"Unexpected invariant triggered.")}return ie}var Ie;function fe(){if(Ie)return ne;Ie=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.getLocation=c;var e=Nt();const n=/\r\n|[\n\r]/g;function c(r,s){let u=0,i=1;for(const m of r.body.matchAll(n)){if(typeof m.index=="number"||(0,e.invariant)(!1),m.index>=s)break;u=m.index+m[0].length,i+=1}return{line:i,column:s+1-u}}return ne}var Z={},_e;function ze(){if(_e)return Z;_e=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.printLocation=n,Z.printSourceLocation=c;var e=fe();function n(s){return c(s.source,(0,e.getLocation)(s.source,s.start))}function c(s,u){const i=s.locationOffset.column-1,m="".padStart(i)+s.body,E=u.line-1,d=s.locationOffset.line-1,N=u.line+d,t=u.line===1?i:0,l=u.column+t,y=`${s.name}:${N}:${l}
`,O=m.split(/\r\n|[\n\r]/g),o=O[E];if(o.length>120){const a=Math.floor(l/80),f=l%80,T=[];for(let k=0;k<o.length;k+=80)T.push(o.slice(k,k+80));return y+r([[`${N} |`,T[0]],...T.slice(1,a+1).map(k=>["|",k]),["|","^".padStart(f)],["|",T[a+1]]])}return y+r([[`${N-1} |`,O[E-1]],[`${N} |`,o],["|","^".padStart(l)],[`${N+1} |`,O[E+1]]])}function r(s){const u=s.filter(([m,E])=>E!==void 0),i=Math.max(...u.map(([m])=>m.length));return u.map(([m,E])=>m.padStart(i)+(E?" "+E:"")).join(`
`)}return Z}var U={},ge;function ue(){if(ge)return U;ge=1,Object.defineProperty(U,"__esModule",{value:!0}),U.Kind=void 0;var e;return U.Kind=e,function(n){n.NAME="Name",n.DOCUMENT="Document",n.OPERATION_DEFINITION="OperationDefinition",n.VARIABLE_DEFINITION="VariableDefinition",n.SELECTION_SET="SelectionSet",n.FIELD="Field",n.ARGUMENT="Argument",n.FRAGMENT_SPREAD="FragmentSpread",n.INLINE_FRAGMENT="InlineFragment",n.FRAGMENT_DEFINITION="FragmentDefinition",n.VARIABLE="Variable",n.INT="IntValue",n.FLOAT="FloatValue",n.STRING="StringValue",n.BOOLEAN="BooleanValue",n.NULL="NullValue",n.ENUM="EnumValue",n.LIST="ListValue",n.OBJECT="ObjectValue",n.OBJECT_FIELD="ObjectField",n.DIRECTIVE="Directive",n.NAMED_TYPE="NamedType",n.LIST_TYPE="ListType",n.NON_NULL_TYPE="NonNullType",n.SCHEMA_DEFINITION="SchemaDefinition",n.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",n.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",n.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",n.FIELD_DEFINITION="FieldDefinition",n.INPUT_VALUE_DEFINITION="InputValueDefinition",n.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",n.UNION_TYPE_DEFINITION="UnionTypeDefinition",n.ENUM_TYPE_DEFINITION="EnumTypeDefinition",n.ENUM_VALUE_DEFINITION="EnumValueDefinition",n.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",n.DIRECTIVE_DEFINITION="DirectiveDefinition",n.SCHEMA_EXTENSION="SchemaExtension",n.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",n.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",n.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",n.UNION_TYPE_EXTENSION="UnionTypeExtension",n.ENUM_TYPE_EXTENSION="EnumTypeExtension",n.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"}(e||(U.Kind=e={})),U}var Q={},ke;function Te(){if(ke)return Q;ke=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.TokenKind=void 0;var e;return Q.TokenKind=e,function(n){n.SOF="<SOF>",n.EOF="<EOF>",n.BANG="!",n.DOLLAR="$",n.AMP="&",n.PAREN_L="(",n.PAREN_R=")",n.SPREAD="...",n.COLON=":",n.EQUALS="=",n.AT="@",n.BRACKET_L="[",n.BRACKET_R="]",n.BRACE_L="{",n.PIPE="|",n.BRACE_R="}",n.NAME="Name",n.INT="Int",n.FLOAT="Float",n.STRING="String",n.BLOCK_STRING="BlockString",n.COMMENT="Comment"}(e||(Q.TokenKind=e={})),Q}var $={},re={},V={},se={},xe;function yt(){if(xe)return se;xe=1,Object.defineProperty(se,"__esModule",{value:!0}),se.isObjectLike=e;function e(n){return typeof n=="object"&&n!==null}return se}var Se;function mt(){if(Se)return V;Se=1,Object.defineProperty(V,"__esModule",{value:!0}),V.GraphQLError=void 0,V.formatError=m,V.printError=i;var e=yt(),n=fe(),c=ze();function r(E){const d=E[0];return d==null||"kind"in d||"length"in d?{nodes:d,source:E[1],positions:E[2],path:E[3],originalError:E[4],extensions:E[5]}:d}let s=class Xe extends Error{constructor(d,...N){var t,l,y;const{nodes:O,source:o,positions:a,path:f,originalError:T,extensions:k}=r(N);super(d),this.name="GraphQLError",this.path=f??void 0,this.originalError=T??void 0,this.nodes=u(Array.isArray(O)?O:O?[O]:void 0);const S=u((t=this.nodes)===null||t===void 0?void 0:t.map(A=>A.loc).filter(A=>A!=null));this.source=o??(S==null||(l=S[0])===null||l===void 0?void 0:l.source),this.positions=a??(S==null?void 0:S.map(A=>A.start)),this.locations=a&&o?a.map(A=>(0,n.getLocation)(o,A)):S==null?void 0:S.map(A=>(0,n.getLocation)(A.source,A.start));const b=(0,e.isObjectLike)(T==null?void 0:T.extensions)?T==null?void 0:T.extensions:void 0;this.extensions=(y=k??b)!==null&&y!==void 0?y:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),T!=null&&T.stack?Object.defineProperty(this,"stack",{value:T.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Xe):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let d=this.message;if(this.nodes)for(const N of this.nodes)N.loc&&(d+=`

`+(0,c.printLocation)(N.loc));else if(this.source&&this.locations)for(const N of this.locations)d+=`

`+(0,c.printSourceLocation)(this.source,N);return d}toJSON(){const d={message:this.message};return this.locations!=null&&(d.locations=this.locations),this.path!=null&&(d.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(d.extensions=this.extensions),d}};V.GraphQLError=s;function u(E){return E===void 0||E.length===0?void 0:E}function i(E){return E.toString()}function m(E){return E.toJSON()}return V}var be;function He(){if(be)return re;be=1,Object.defineProperty(re,"__esModule",{value:!0}),re.syntaxError=n;var e=mt();function n(c,r,s){return new e.GraphQLError(`Syntax Error: ${s}`,{source:c,positions:[r]})}return re}var R={},Le;function le(){if(Le)return R;Le=1,Object.defineProperty(R,"__esModule",{value:!0}),R.Token=R.QueryDocumentKeys=R.OperationTypeNode=R.Location=void 0,R.isNode=s;class e{constructor(m,E,d){this.start=m.start,this.end=E.end,this.startToken=m,this.endToken=E,this.source=d}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}R.Location=e;class n{constructor(m,E,d,N,t,l){this.kind=m,this.start=E,this.end=d,this.line=N,this.column=t,this.value=l,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}R.Token=n;const c={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};R.QueryDocumentKeys=c;const r=new Set(Object.keys(c));function s(i){const m=i==null?void 0:i.kind;return typeof m=="string"&&r.has(m)}var u;return R.OperationTypeNode=u,function(i){i.QUERY="query",i.MUTATION="mutation",i.SUBSCRIPTION="subscription"}(u||(R.OperationTypeNode=u={})),R}var q={},w={},Ae;function We(){if(Ae)return w;Ae=1,Object.defineProperty(w,"__esModule",{value:!0}),w.isDigit=n,w.isLetter=c,w.isNameContinue=s,w.isNameStart=r,w.isWhiteSpace=e;function e(u){return u===9||u===32}function n(u){return u>=48&&u<=57}function c(u){return u>=97&&u<=122||u>=65&&u<=90}function r(u){return c(u)||u===95}function s(u){return c(u)||n(u)||u===95}return w}var De;function Ze(){if(De)return q;De=1,Object.defineProperty(q,"__esModule",{value:!0}),q.dedentBlockStringLines=n,q.isPrintableAsBlockString=r,q.printBlockString=s;var e=We();function n(u){var i;let m=Number.MAX_SAFE_INTEGER,E=null,d=-1;for(let t=0;t<u.length;++t){var N;const l=u[t],y=c(l);y!==l.length&&(E=(N=E)!==null&&N!==void 0?N:t,d=t,t!==0&&y<m&&(m=y))}return u.map((t,l)=>l===0?t:t.slice(m)).slice((i=E)!==null&&i!==void 0?i:0,d+1)}function c(u){let i=0;for(;i<u.length&&(0,e.isWhiteSpace)(u.charCodeAt(i));)++i;return i}function r(u){if(u==="")return!0;let i=!0,m=!1,E=!0,d=!1;for(let N=0;N<u.length;++N)switch(u.codePointAt(N)){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 11:case 12:case 14:case 15:return!1;case 13:return!1;case 10:if(i&&!d)return!1;d=!0,i=!0,m=!1;break;case 9:case 32:m||(m=i);break;default:E&&(E=m),i=!1}return!(i||E&&d)}function s(u,i){const m=u.replace(/"""/g,'\\"""'),E=m.split(/\r\n|[\n\r]/g),d=E.length===1,N=E.length>1&&E.slice(1).every(T=>T.length===0||(0,e.isWhiteSpace)(T.charCodeAt(0))),t=m.endsWith('\\"""'),l=u.endsWith('"')&&!t,y=u.endsWith("\\"),O=l||y,o=!(i!=null&&i.minimize)&&(!d||u.length>70||O||N||t);let a="";const f=d&&(0,e.isWhiteSpace)(u.charCodeAt(0));return(o&&!f||N)&&(a+=`
`),a+=m,(o||O)&&(a+=`
`),'"""'+a+'"""'}return q}var Ce;function et(){if(Ce)return $;Ce=1,Object.defineProperty($,"__esModule",{value:!0}),$.Lexer=void 0,$.isPunctuatorTokenKind=i;var e=He(),n=le(),c=Ze(),r=We(),s=Te();class u{constructor(v){const _=new n.Token(s.TokenKind.SOF,0,0,0,0);this.source=v,this.lastToken=_,this.token=_,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let v=this.token;if(v.kind!==s.TokenKind.EOF)do if(v.next)v=v.next;else{const _=y(this,v.end);v.next=_,_.prev=v,v=_}while(v.kind===s.TokenKind.COMMENT);return v}}$.Lexer=u;function i(h){return h===s.TokenKind.BANG||h===s.TokenKind.DOLLAR||h===s.TokenKind.AMP||h===s.TokenKind.PAREN_L||h===s.TokenKind.PAREN_R||h===s.TokenKind.SPREAD||h===s.TokenKind.COLON||h===s.TokenKind.EQUALS||h===s.TokenKind.AT||h===s.TokenKind.BRACKET_L||h===s.TokenKind.BRACKET_R||h===s.TokenKind.BRACE_L||h===s.TokenKind.PIPE||h===s.TokenKind.BRACE_R}function m(h){return h>=0&&h<=55295||h>=57344&&h<=1114111}function E(h,v){return d(h.charCodeAt(v))&&N(h.charCodeAt(v+1))}function d(h){return h>=55296&&h<=56319}function N(h){return h>=56320&&h<=57343}function t(h,v){const _=h.source.body.codePointAt(v);if(_===void 0)return s.TokenKind.EOF;if(_>=32&&_<=126){const x=String.fromCodePoint(_);return x==='"'?`'"'`:`"${x}"`}return"U+"+_.toString(16).toUpperCase().padStart(4,"0")}function l(h,v,_,x,p){const I=h.line,L=1+_-h.lineStart;return new n.Token(v,_,x,I,L,p)}function y(h,v){const _=h.source.body,x=_.length;let p=v;for(;p<x;){const I=_.charCodeAt(p);switch(I){case 65279:case 9:case 32:case 44:++p;continue;case 10:++p,++h.line,h.lineStart=p;continue;case 13:_.charCodeAt(p+1)===10?p+=2:++p,++h.line,h.lineStart=p;continue;case 35:return O(h,p);case 33:return l(h,s.TokenKind.BANG,p,p+1);case 36:return l(h,s.TokenKind.DOLLAR,p,p+1);case 38:return l(h,s.TokenKind.AMP,p,p+1);case 40:return l(h,s.TokenKind.PAREN_L,p,p+1);case 41:return l(h,s.TokenKind.PAREN_R,p,p+1);case 46:if(_.charCodeAt(p+1)===46&&_.charCodeAt(p+2)===46)return l(h,s.TokenKind.SPREAD,p,p+3);break;case 58:return l(h,s.TokenKind.COLON,p,p+1);case 61:return l(h,s.TokenKind.EQUALS,p,p+1);case 64:return l(h,s.TokenKind.AT,p,p+1);case 91:return l(h,s.TokenKind.BRACKET_L,p,p+1);case 93:return l(h,s.TokenKind.BRACKET_R,p,p+1);case 123:return l(h,s.TokenKind.BRACE_L,p,p+1);case 124:return l(h,s.TokenKind.PIPE,p,p+1);case 125:return l(h,s.TokenKind.BRACE_R,p,p+1);case 34:return _.charCodeAt(p+1)===34&&_.charCodeAt(p+2)===34?z(h,p):f(h,p)}if((0,r.isDigit)(I)||I===45)return o(h,p,I);if((0,r.isNameStart)(I))return X(h,p);throw(0,e.syntaxError)(h.source,p,I===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:m(I)||E(_,p)?`Unexpected character: ${t(h,p)}.`:`Invalid character: ${t(h,p)}.`)}return l(h,s.TokenKind.EOF,x,x)}function O(h,v){const _=h.source.body,x=_.length;let p=v+1;for(;p<x;){const I=_.charCodeAt(p);if(I===10||I===13)break;if(m(I))++p;else if(E(_,p))p+=2;else break}return l(h,s.TokenKind.COMMENT,v,p,_.slice(v+1,p))}function o(h,v,_){const x=h.source.body;let p=v,I=_,L=!1;if(I===45&&(I=x.charCodeAt(++p)),I===48){if(I=x.charCodeAt(++p),(0,r.isDigit)(I))throw(0,e.syntaxError)(h.source,p,`Invalid number, unexpected digit after 0: ${t(h,p)}.`)}else p=a(h,p,I),I=x.charCodeAt(p);if(I===46&&(L=!0,I=x.charCodeAt(++p),p=a(h,p,I),I=x.charCodeAt(p)),(I===69||I===101)&&(L=!0,I=x.charCodeAt(++p),(I===43||I===45)&&(I=x.charCodeAt(++p)),p=a(h,p,I),I=x.charCodeAt(p)),I===46||(0,r.isNameStart)(I))throw(0,e.syntaxError)(h.source,p,`Invalid number, expected digit but got: ${t(h,p)}.`);return l(h,L?s.TokenKind.FLOAT:s.TokenKind.INT,v,p,x.slice(v,p))}function a(h,v,_){if(!(0,r.isDigit)(_))throw(0,e.syntaxError)(h.source,v,`Invalid number, expected digit but got: ${t(h,v)}.`);const x=h.source.body;let p=v+1;for(;(0,r.isDigit)(x.charCodeAt(p));)++p;return p}function f(h,v){const _=h.source.body,x=_.length;let p=v+1,I=p,L="";for(;p<x;){const D=_.charCodeAt(p);if(D===34)return L+=_.slice(I,p),l(h,s.TokenKind.STRING,v,p+1,L);if(D===92){L+=_.slice(I,p);const M=_.charCodeAt(p+1)===117?_.charCodeAt(p+2)===123?T(h,p):k(h,p):A(h,p);L+=M.value,p+=M.size,I=p;continue}if(D===10||D===13)break;if(m(D))++p;else if(E(_,p))p+=2;else throw(0,e.syntaxError)(h.source,p,`Invalid character within String: ${t(h,p)}.`)}throw(0,e.syntaxError)(h.source,p,"Unterminated string.")}function T(h,v){const _=h.source.body;let x=0,p=3;for(;p<12;){const I=_.charCodeAt(v+p++);if(I===125){if(p<5||!m(x))break;return{value:String.fromCodePoint(x),size:p}}if(x=x<<4|b(I),x<0)break}throw(0,e.syntaxError)(h.source,v,`Invalid Unicode escape sequence: "${_.slice(v,v+p)}".`)}function k(h,v){const _=h.source.body,x=S(_,v+2);if(m(x))return{value:String.fromCodePoint(x),size:6};if(d(x)&&_.charCodeAt(v+6)===92&&_.charCodeAt(v+7)===117){const p=S(_,v+8);if(N(p))return{value:String.fromCodePoint(x,p),size:12}}throw(0,e.syntaxError)(h.source,v,`Invalid Unicode escape sequence: "${_.slice(v,v+6)}".`)}function S(h,v){return b(h.charCodeAt(v))<<12|b(h.charCodeAt(v+1))<<8|b(h.charCodeAt(v+2))<<4|b(h.charCodeAt(v+3))}function b(h){return h>=48&&h<=57?h-48:h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:-1}function A(h,v){const _=h.source.body;switch(_.charCodeAt(v+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw(0,e.syntaxError)(h.source,v,`Invalid character escape sequence: "${_.slice(v,v+2)}".`)}function z(h,v){const _=h.source.body,x=_.length;let p=h.lineStart,I=v+3,L=I,D="";const M=[];for(;I<x;){const B=_.charCodeAt(I);if(B===34&&_.charCodeAt(I+1)===34&&_.charCodeAt(I+2)===34){D+=_.slice(L,I),M.push(D);const ft=l(h,s.TokenKind.BLOCK_STRING,v,I+3,(0,c.dedentBlockStringLines)(M).join(`
`));return h.line+=M.length-1,h.lineStart=p,ft}if(B===92&&_.charCodeAt(I+1)===34&&_.charCodeAt(I+2)===34&&_.charCodeAt(I+3)===34){D+=_.slice(L,I),L=I+1,I+=4;continue}if(B===10||B===13){D+=_.slice(L,I),M.push(D),B===13&&_.charCodeAt(I+1)===10?I+=2:++I,D="",L=I,p=I;continue}if(m(B))++I;else if(E(_,I))I+=2;else throw(0,e.syntaxError)(h.source,I,`Invalid character within String: ${t(h,I)}.`)}throw(0,e.syntaxError)(h.source,I,"Unterminated string.")}function X(h,v){const _=h.source.body,x=_.length;let p=v+1;for(;p<x;){const I=_.charCodeAt(p);if((0,r.isNameContinue)(I))++p;else break}return l(h,s.TokenKind.NAME,v,p,_.slice(v,p))}return $}var P={},Y={},Ke;function tt(){if(Ke)return Y;Ke=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.DirectiveLocation=void 0;var e;return Y.DirectiveLocation=e,function(n){n.QUERY="QUERY",n.MUTATION="MUTATION",n.SUBSCRIPTION="SUBSCRIPTION",n.FIELD="FIELD",n.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",n.FRAGMENT_SPREAD="FRAGMENT_SPREAD",n.INLINE_FRAGMENT="INLINE_FRAGMENT",n.VARIABLE_DEFINITION="VARIABLE_DEFINITION",n.SCHEMA="SCHEMA",n.SCALAR="SCALAR",n.OBJECT="OBJECT",n.FIELD_DEFINITION="FIELD_DEFINITION",n.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",n.INTERFACE="INTERFACE",n.UNION="UNION",n.ENUM="ENUM",n.ENUM_VALUE="ENUM_VALUE",n.INPUT_OBJECT="INPUT_OBJECT",n.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"}(e||(Y.DirectiveLocation=e={})),Y}var Re;function Ot(){if(Re)return P;Re=1,Object.defineProperty(P,"__esModule",{value:!0}),P.Parser=void 0,P.parse=m,P.parseConstValue=d,P.parseType=N,P.parseValue=E;var e=He(),n=le(),c=tt(),r=ue(),s=et(),u=Je(),i=Te();function m(O,o){const a=new t(O,o),f=a.parseDocument();return Object.defineProperty(f,"tokenCount",{enumerable:!1,value:a.tokenCount}),f}function E(O,o){const a=new t(O,o);a.expectToken(i.TokenKind.SOF);const f=a.parseValueLiteral(!1);return a.expectToken(i.TokenKind.EOF),f}function d(O,o){const a=new t(O,o);a.expectToken(i.TokenKind.SOF);const f=a.parseConstValueLiteral();return a.expectToken(i.TokenKind.EOF),f}function N(O,o){const a=new t(O,o);a.expectToken(i.TokenKind.SOF);const f=a.parseTypeReference();return a.expectToken(i.TokenKind.EOF),f}class t{constructor(o,a={}){const f=(0,u.isSource)(o)?o:new u.Source(o);this._lexer=new s.Lexer(f),this._options=a,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const o=this.expectToken(i.TokenKind.NAME);return this.node(o,{kind:r.Kind.NAME,value:o.value})}parseDocument(){return this.node(this._lexer.token,{kind:r.Kind.DOCUMENT,definitions:this.many(i.TokenKind.SOF,this.parseDefinition,i.TokenKind.EOF)})}parseDefinition(){if(this.peek(i.TokenKind.BRACE_L))return this.parseOperationDefinition();const o=this.peekDescription(),a=o?this._lexer.lookahead():this._lexer.token;if(a.kind===i.TokenKind.NAME){switch(a.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(o)throw(0,e.syntaxError)(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(a.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(a)}parseOperationDefinition(){const o=this._lexer.token;if(this.peek(i.TokenKind.BRACE_L))return this.node(o,{kind:r.Kind.OPERATION_DEFINITION,operation:n.OperationTypeNode.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const a=this.parseOperationType();let f;return this.peek(i.TokenKind.NAME)&&(f=this.parseName()),this.node(o,{kind:r.Kind.OPERATION_DEFINITION,operation:a,name:f,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const o=this.expectToken(i.TokenKind.NAME);switch(o.value){case"query":return n.OperationTypeNode.QUERY;case"mutation":return n.OperationTypeNode.MUTATION;case"subscription":return n.OperationTypeNode.SUBSCRIPTION}throw this.unexpected(o)}parseVariableDefinitions(){return this.optionalMany(i.TokenKind.PAREN_L,this.parseVariableDefinition,i.TokenKind.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:r.Kind.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(i.TokenKind.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(i.TokenKind.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const o=this._lexer.token;return this.expectToken(i.TokenKind.DOLLAR),this.node(o,{kind:r.Kind.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:r.Kind.SELECTION_SET,selections:this.many(i.TokenKind.BRACE_L,this.parseSelection,i.TokenKind.BRACE_R)})}parseSelection(){return this.peek(i.TokenKind.SPREAD)?this.parseFragment():this.parseField()}parseField(){const o=this._lexer.token,a=this.parseName();let f,T;return this.expectOptionalToken(i.TokenKind.COLON)?(f=a,T=this.parseName()):T=a,this.node(o,{kind:r.Kind.FIELD,alias:f,name:T,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(i.TokenKind.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(o){const a=o?this.parseConstArgument:this.parseArgument;return this.optionalMany(i.TokenKind.PAREN_L,a,i.TokenKind.PAREN_R)}parseArgument(o=!1){const a=this._lexer.token,f=this.parseName();return this.expectToken(i.TokenKind.COLON),this.node(a,{kind:r.Kind.ARGUMENT,name:f,value:this.parseValueLiteral(o)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const o=this._lexer.token;this.expectToken(i.TokenKind.SPREAD);const a=this.expectOptionalKeyword("on");return!a&&this.peek(i.TokenKind.NAME)?this.node(o,{kind:r.Kind.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(o,{kind:r.Kind.INLINE_FRAGMENT,typeCondition:a?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const o=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(o,{kind:r.Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(o,{kind:r.Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(o){const a=this._lexer.token;switch(a.kind){case i.TokenKind.BRACKET_L:return this.parseList(o);case i.TokenKind.BRACE_L:return this.parseObject(o);case i.TokenKind.INT:return this.advanceLexer(),this.node(a,{kind:r.Kind.INT,value:a.value});case i.TokenKind.FLOAT:return this.advanceLexer(),this.node(a,{kind:r.Kind.FLOAT,value:a.value});case i.TokenKind.STRING:case i.TokenKind.BLOCK_STRING:return this.parseStringLiteral();case i.TokenKind.NAME:switch(this.advanceLexer(),a.value){case"true":return this.node(a,{kind:r.Kind.BOOLEAN,value:!0});case"false":return this.node(a,{kind:r.Kind.BOOLEAN,value:!1});case"null":return this.node(a,{kind:r.Kind.NULL});default:return this.node(a,{kind:r.Kind.ENUM,value:a.value})}case i.TokenKind.DOLLAR:if(o)if(this.expectToken(i.TokenKind.DOLLAR),this._lexer.token.kind===i.TokenKind.NAME){const f=this._lexer.token.value;throw(0,e.syntaxError)(this._lexer.source,a.start,`Unexpected variable "$${f}" in constant value.`)}else throw this.unexpected(a);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const o=this._lexer.token;return this.advanceLexer(),this.node(o,{kind:r.Kind.STRING,value:o.value,block:o.kind===i.TokenKind.BLOCK_STRING})}parseList(o){const a=()=>this.parseValueLiteral(o);return this.node(this._lexer.token,{kind:r.Kind.LIST,values:this.any(i.TokenKind.BRACKET_L,a,i.TokenKind.BRACKET_R)})}parseObject(o){const a=()=>this.parseObjectField(o);return this.node(this._lexer.token,{kind:r.Kind.OBJECT,fields:this.any(i.TokenKind.BRACE_L,a,i.TokenKind.BRACE_R)})}parseObjectField(o){const a=this._lexer.token,f=this.parseName();return this.expectToken(i.TokenKind.COLON),this.node(a,{kind:r.Kind.OBJECT_FIELD,name:f,value:this.parseValueLiteral(o)})}parseDirectives(o){const a=[];for(;this.peek(i.TokenKind.AT);)a.push(this.parseDirective(o));return a}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(o){const a=this._lexer.token;return this.expectToken(i.TokenKind.AT),this.node(a,{kind:r.Kind.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(o)})}parseTypeReference(){const o=this._lexer.token;let a;if(this.expectOptionalToken(i.TokenKind.BRACKET_L)){const f=this.parseTypeReference();this.expectToken(i.TokenKind.BRACKET_R),a=this.node(o,{kind:r.Kind.LIST_TYPE,type:f})}else a=this.parseNamedType();return this.expectOptionalToken(i.TokenKind.BANG)?this.node(o,{kind:r.Kind.NON_NULL_TYPE,type:a}):a}parseNamedType(){return this.node(this._lexer.token,{kind:r.Kind.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(i.TokenKind.STRING)||this.peek(i.TokenKind.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const o=this._lexer.token,a=this.parseDescription();this.expectKeyword("schema");const f=this.parseConstDirectives(),T=this.many(i.TokenKind.BRACE_L,this.parseOperationTypeDefinition,i.TokenKind.BRACE_R);return this.node(o,{kind:r.Kind.SCHEMA_DEFINITION,description:a,directives:f,operationTypes:T})}parseOperationTypeDefinition(){const o=this._lexer.token,a=this.parseOperationType();this.expectToken(i.TokenKind.COLON);const f=this.parseNamedType();return this.node(o,{kind:r.Kind.OPERATION_TYPE_DEFINITION,operation:a,type:f})}parseScalarTypeDefinition(){const o=this._lexer.token,a=this.parseDescription();this.expectKeyword("scalar");const f=this.parseName(),T=this.parseConstDirectives();return this.node(o,{kind:r.Kind.SCALAR_TYPE_DEFINITION,description:a,name:f,directives:T})}parseObjectTypeDefinition(){const o=this._lexer.token,a=this.parseDescription();this.expectKeyword("type");const f=this.parseName(),T=this.parseImplementsInterfaces(),k=this.parseConstDirectives(),S=this.parseFieldsDefinition();return this.node(o,{kind:r.Kind.OBJECT_TYPE_DEFINITION,description:a,name:f,interfaces:T,directives:k,fields:S})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(i.TokenKind.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(i.TokenKind.BRACE_L,this.parseFieldDefinition,i.TokenKind.BRACE_R)}parseFieldDefinition(){const o=this._lexer.token,a=this.parseDescription(),f=this.parseName(),T=this.parseArgumentDefs();this.expectToken(i.TokenKind.COLON);const k=this.parseTypeReference(),S=this.parseConstDirectives();return this.node(o,{kind:r.Kind.FIELD_DEFINITION,description:a,name:f,arguments:T,type:k,directives:S})}parseArgumentDefs(){return this.optionalMany(i.TokenKind.PAREN_L,this.parseInputValueDef,i.TokenKind.PAREN_R)}parseInputValueDef(){const o=this._lexer.token,a=this.parseDescription(),f=this.parseName();this.expectToken(i.TokenKind.COLON);const T=this.parseTypeReference();let k;this.expectOptionalToken(i.TokenKind.EQUALS)&&(k=this.parseConstValueLiteral());const S=this.parseConstDirectives();return this.node(o,{kind:r.Kind.INPUT_VALUE_DEFINITION,description:a,name:f,type:T,defaultValue:k,directives:S})}parseInterfaceTypeDefinition(){const o=this._lexer.token,a=this.parseDescription();this.expectKeyword("interface");const f=this.parseName(),T=this.parseImplementsInterfaces(),k=this.parseConstDirectives(),S=this.parseFieldsDefinition();return this.node(o,{kind:r.Kind.INTERFACE_TYPE_DEFINITION,description:a,name:f,interfaces:T,directives:k,fields:S})}parseUnionTypeDefinition(){const o=this._lexer.token,a=this.parseDescription();this.expectKeyword("union");const f=this.parseName(),T=this.parseConstDirectives(),k=this.parseUnionMemberTypes();return this.node(o,{kind:r.Kind.UNION_TYPE_DEFINITION,description:a,name:f,directives:T,types:k})}parseUnionMemberTypes(){return this.expectOptionalToken(i.TokenKind.EQUALS)?this.delimitedMany(i.TokenKind.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const o=this._lexer.token,a=this.parseDescription();this.expectKeyword("enum");const f=this.parseName(),T=this.parseConstDirectives(),k=this.parseEnumValuesDefinition();return this.node(o,{kind:r.Kind.ENUM_TYPE_DEFINITION,description:a,name:f,directives:T,values:k})}parseEnumValuesDefinition(){return this.optionalMany(i.TokenKind.BRACE_L,this.parseEnumValueDefinition,i.TokenKind.BRACE_R)}parseEnumValueDefinition(){const o=this._lexer.token,a=this.parseDescription(),f=this.parseEnumValueName(),T=this.parseConstDirectives();return this.node(o,{kind:r.Kind.ENUM_VALUE_DEFINITION,description:a,name:f,directives:T})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw(0,e.syntaxError)(this._lexer.source,this._lexer.token.start,`${l(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const o=this._lexer.token,a=this.parseDescription();this.expectKeyword("input");const f=this.parseName(),T=this.parseConstDirectives(),k=this.parseInputFieldsDefinition();return this.node(o,{kind:r.Kind.INPUT_OBJECT_TYPE_DEFINITION,description:a,name:f,directives:T,fields:k})}parseInputFieldsDefinition(){return this.optionalMany(i.TokenKind.BRACE_L,this.parseInputValueDef,i.TokenKind.BRACE_R)}parseTypeSystemExtension(){const o=this._lexer.lookahead();if(o.kind===i.TokenKind.NAME)switch(o.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(o)}parseSchemaExtension(){const o=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const a=this.parseConstDirectives(),f=this.optionalMany(i.TokenKind.BRACE_L,this.parseOperationTypeDefinition,i.TokenKind.BRACE_R);if(a.length===0&&f.length===0)throw this.unexpected();return this.node(o,{kind:r.Kind.SCHEMA_EXTENSION,directives:a,operationTypes:f})}parseScalarTypeExtension(){const o=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const a=this.parseName(),f=this.parseConstDirectives();if(f.length===0)throw this.unexpected();return this.node(o,{kind:r.Kind.SCALAR_TYPE_EXTENSION,name:a,directives:f})}parseObjectTypeExtension(){const o=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const a=this.parseName(),f=this.parseImplementsInterfaces(),T=this.parseConstDirectives(),k=this.parseFieldsDefinition();if(f.length===0&&T.length===0&&k.length===0)throw this.unexpected();return this.node(o,{kind:r.Kind.OBJECT_TYPE_EXTENSION,name:a,interfaces:f,directives:T,fields:k})}parseInterfaceTypeExtension(){const o=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const a=this.parseName(),f=this.parseImplementsInterfaces(),T=this.parseConstDirectives(),k=this.parseFieldsDefinition();if(f.length===0&&T.length===0&&k.length===0)throw this.unexpected();return this.node(o,{kind:r.Kind.INTERFACE_TYPE_EXTENSION,name:a,interfaces:f,directives:T,fields:k})}parseUnionTypeExtension(){const o=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const a=this.parseName(),f=this.parseConstDirectives(),T=this.parseUnionMemberTypes();if(f.length===0&&T.length===0)throw this.unexpected();return this.node(o,{kind:r.Kind.UNION_TYPE_EXTENSION,name:a,directives:f,types:T})}parseEnumTypeExtension(){const o=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const a=this.parseName(),f=this.parseConstDirectives(),T=this.parseEnumValuesDefinition();if(f.length===0&&T.length===0)throw this.unexpected();return this.node(o,{kind:r.Kind.ENUM_TYPE_EXTENSION,name:a,directives:f,values:T})}parseInputObjectTypeExtension(){const o=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const a=this.parseName(),f=this.parseConstDirectives(),T=this.parseInputFieldsDefinition();if(f.length===0&&T.length===0)throw this.unexpected();return this.node(o,{kind:r.Kind.INPUT_OBJECT_TYPE_EXTENSION,name:a,directives:f,fields:T})}parseDirectiveDefinition(){const o=this._lexer.token,a=this.parseDescription();this.expectKeyword("directive"),this.expectToken(i.TokenKind.AT);const f=this.parseName(),T=this.parseArgumentDefs(),k=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const S=this.parseDirectiveLocations();return this.node(o,{kind:r.Kind.DIRECTIVE_DEFINITION,description:a,name:f,arguments:T,repeatable:k,locations:S})}parseDirectiveLocations(){return this.delimitedMany(i.TokenKind.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const o=this._lexer.token,a=this.parseName();if(Object.prototype.hasOwnProperty.call(c.DirectiveLocation,a.value))return a;throw this.unexpected(o)}node(o,a){return this._options.noLocation!==!0&&(a.loc=new n.Location(o,this._lexer.lastToken,this._lexer.source)),a}peek(o){return this._lexer.token.kind===o}expectToken(o){const a=this._lexer.token;if(a.kind===o)return this.advanceLexer(),a;throw(0,e.syntaxError)(this._lexer.source,a.start,`Expected ${y(o)}, found ${l(a)}.`)}expectOptionalToken(o){return this._lexer.token.kind===o?(this.advanceLexer(),!0):!1}expectKeyword(o){const a=this._lexer.token;if(a.kind===i.TokenKind.NAME&&a.value===o)this.advanceLexer();else throw(0,e.syntaxError)(this._lexer.source,a.start,`Expected "${o}", found ${l(a)}.`)}expectOptionalKeyword(o){const a=this._lexer.token;return a.kind===i.TokenKind.NAME&&a.value===o?(this.advanceLexer(),!0):!1}unexpected(o){const a=o??this._lexer.token;return(0,e.syntaxError)(this._lexer.source,a.start,`Unexpected ${l(a)}.`)}any(o,a,f){this.expectToken(o);const T=[];for(;!this.expectOptionalToken(f);)T.push(a.call(this));return T}optionalMany(o,a,f){if(this.expectOptionalToken(o)){const T=[];do T.push(a.call(this));while(!this.expectOptionalToken(f));return T}return[]}many(o,a,f){this.expectToken(o);const T=[];do T.push(a.call(this));while(!this.expectOptionalToken(f));return T}delimitedMany(o,a){this.expectOptionalToken(o);const f=[];do f.push(a.call(this));while(this.expectOptionalToken(o));return f}advanceLexer(){const{maxTokens:o}=this._options,a=this._lexer.advance();if(a.kind!==i.TokenKind.EOF&&(++this._tokenCounter,o!==void 0&&this._tokenCounter>o))throw(0,e.syntaxError)(this._lexer.source,a.start,`Document contains more that ${o} tokens. Parsing aborted.`)}}P.Parser=t;function l(O){const o=O.value;return y(O.kind)+(o!=null?` "${o}"`:"")}function y(O){return(0,s.isPunctuatorTokenKind)(O)?`"${O}"`:O}return P}var oe={},ae={},Fe;function vt(){if(Fe)return ae;Fe=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.printString=e;function e(s){return`"${s.replace(n,c)}"`}const n=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function c(s){return r[s.charCodeAt(0)]}const r=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];return ae}var j={},Pe;function nt(){if(Pe)return j;Pe=1,Object.defineProperty(j,"__esModule",{value:!0}),j.BREAK=void 0,j.getEnterLeaveForKind=m,j.getVisitFn=E,j.visit=u,j.visitInParallel=i;var e=Ye(),n=he(),c=le(),r=ue();const s=Object.freeze({});j.BREAK=s;function u(d,N,t=c.QueryDocumentKeys){const l=new Map;for(const v of Object.values(r.Kind))l.set(v,m(N,v));let y,O=Array.isArray(d),o=[d],a=-1,f=[],T=d,k,S;const b=[],A=[];do{a++;const v=a===o.length,_=v&&f.length!==0;if(v){if(k=A.length===0?void 0:b[b.length-1],T=S,S=A.pop(),_)if(O){T=T.slice();let p=0;for(const[I,L]of f){const D=I-p;L===null?(T.splice(D,1),p++):T[D]=L}}else{T=Object.defineProperties({},Object.getOwnPropertyDescriptors(T));for(const[p,I]of f)T[p]=I}a=y.index,o=y.keys,f=y.edits,O=y.inArray,y=y.prev}else if(S){if(k=O?a:o[a],T=S[k],T==null)continue;b.push(k)}let x;if(!Array.isArray(T)){var z,X;(0,c.isNode)(T)||(0,e.devAssert)(!1,`Invalid AST Node: ${(0,n.inspect)(T)}.`);const p=v?(z=l.get(T.kind))===null||z===void 0?void 0:z.leave:(X=l.get(T.kind))===null||X===void 0?void 0:X.enter;if(x=p==null?void 0:p.call(N,T,k,S,b,A),x===s)break;if(x===!1){if(!v){b.pop();continue}}else if(x!==void 0&&(f.push([k,x]),!v))if((0,c.isNode)(x))T=x;else{b.pop();continue}}if(x===void 0&&_&&f.push([k,T]),v)b.pop();else{var h;y={inArray:O,index:a,keys:o,edits:f,prev:y},O=Array.isArray(T),o=O?T:(h=t[T.kind])!==null&&h!==void 0?h:[],a=-1,f=[],S&&A.push(S),S=T}}while(y!==void 0);return f.length!==0?f[f.length-1][1]:d}function i(d){const N=new Array(d.length).fill(null),t=Object.create(null);for(const l of Object.values(r.Kind)){let y=!1;const O=new Array(d.length).fill(void 0),o=new Array(d.length).fill(void 0);for(let f=0;f<d.length;++f){const{enter:T,leave:k}=m(d[f],l);y||(y=T!=null||k!=null),O[f]=T,o[f]=k}if(!y)continue;const a={enter(...f){const T=f[0];for(let S=0;S<d.length;S++)if(N[S]===null){var k;const b=(k=O[S])===null||k===void 0?void 0:k.apply(d[S],f);if(b===!1)N[S]=T;else if(b===s)N[S]=s;else if(b!==void 0)return b}},leave(...f){const T=f[0];for(let S=0;S<d.length;S++)if(N[S]===null){var k;const b=(k=o[S])===null||k===void 0?void 0:k.apply(d[S],f);if(b===s)N[S]=s;else if(b!==void 0&&b!==!1)return b}else N[S]===T&&(N[S]=null)}};t[l]=a}return t}function m(d,N){const t=d[N];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:d.enter,leave:d.leave}}function E(d,N,t){const{enter:l,leave:y}=m(d,N);return t?y:l}return j}var je;function It(){if(je)return oe;je=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.print=r;var e=Ze(),n=vt(),c=nt();function r(t){return(0,c.visit)(t,u)}const s=80,u={Name:{leave:t=>t.value},Variable:{leave:t=>"$"+t.name},Document:{leave:t=>i(t.definitions,`

`)},OperationDefinition:{leave(t){const l=E("(",i(t.variableDefinitions,", "),")"),y=i([t.operation,i([t.name,l]),i(t.directives," ")]," ");return(y==="query"?"":y+" ")+t.selectionSet}},VariableDefinition:{leave:({variable:t,type:l,defaultValue:y,directives:O})=>t+": "+l+E(" = ",y)+E(" ",i(O," "))},SelectionSet:{leave:({selections:t})=>m(t)},Field:{leave({alias:t,name:l,arguments:y,directives:O,selectionSet:o}){const a=E("",t,": ")+l;let f=a+E("(",i(y,", "),")");return f.length>s&&(f=a+E(`(
`,d(i(y,`
`)),`
)`)),i([f,i(O," "),o]," ")}},Argument:{leave:({name:t,value:l})=>t+": "+l},FragmentSpread:{leave:({name:t,directives:l})=>"..."+t+E(" ",i(l," "))},InlineFragment:{leave:({typeCondition:t,directives:l,selectionSet:y})=>i(["...",E("on ",t),i(l," "),y]," ")},FragmentDefinition:{leave:({name:t,typeCondition:l,variableDefinitions:y,directives:O,selectionSet:o})=>`fragment ${t}${E("(",i(y,", "),")")} on ${l} ${E("",i(O," ")," ")}`+o},IntValue:{leave:({value:t})=>t},FloatValue:{leave:({value:t})=>t},StringValue:{leave:({value:t,block:l})=>l?(0,e.printBlockString)(t):(0,n.printString)(t)},BooleanValue:{leave:({value:t})=>t?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:t})=>t},ListValue:{leave:({values:t})=>"["+i(t,", ")+"]"},ObjectValue:{leave:({fields:t})=>"{"+i(t,", ")+"}"},ObjectField:{leave:({name:t,value:l})=>t+": "+l},Directive:{leave:({name:t,arguments:l})=>"@"+t+E("(",i(l,", "),")")},NamedType:{leave:({name:t})=>t},ListType:{leave:({type:t})=>"["+t+"]"},NonNullType:{leave:({type:t})=>t+"!"},SchemaDefinition:{leave:({description:t,directives:l,operationTypes:y})=>E("",t,`
`)+i(["schema",i(l," "),m(y)]," ")},OperationTypeDefinition:{leave:({operation:t,type:l})=>t+": "+l},ScalarTypeDefinition:{leave:({description:t,name:l,directives:y})=>E("",t,`
`)+i(["scalar",l,i(y," ")]," ")},ObjectTypeDefinition:{leave:({description:t,name:l,interfaces:y,directives:O,fields:o})=>E("",t,`
`)+i(["type",l,E("implements ",i(y," & ")),i(O," "),m(o)]," ")},FieldDefinition:{leave:({description:t,name:l,arguments:y,type:O,directives:o})=>E("",t,`
`)+l+(N(y)?E(`(
`,d(i(y,`
`)),`
)`):E("(",i(y,", "),")"))+": "+O+E(" ",i(o," "))},InputValueDefinition:{leave:({description:t,name:l,type:y,defaultValue:O,directives:o})=>E("",t,`
`)+i([l+": "+y,E("= ",O),i(o," ")]," ")},InterfaceTypeDefinition:{leave:({description:t,name:l,interfaces:y,directives:O,fields:o})=>E("",t,`
`)+i(["interface",l,E("implements ",i(y," & ")),i(O," "),m(o)]," ")},UnionTypeDefinition:{leave:({description:t,name:l,directives:y,types:O})=>E("",t,`
`)+i(["union",l,i(y," "),E("= ",i(O," | "))]," ")},EnumTypeDefinition:{leave:({description:t,name:l,directives:y,values:O})=>E("",t,`
`)+i(["enum",l,i(y," "),m(O)]," ")},EnumValueDefinition:{leave:({description:t,name:l,directives:y})=>E("",t,`
`)+i([l,i(y," ")]," ")},InputObjectTypeDefinition:{leave:({description:t,name:l,directives:y,fields:O})=>E("",t,`
`)+i(["input",l,i(y," "),m(O)]," ")},DirectiveDefinition:{leave:({description:t,name:l,arguments:y,repeatable:O,locations:o})=>E("",t,`
`)+"directive @"+l+(N(y)?E(`(
`,d(i(y,`
`)),`
)`):E("(",i(y,", "),")"))+(O?" repeatable":"")+" on "+i(o," | ")},SchemaExtension:{leave:({directives:t,operationTypes:l})=>i(["extend schema",i(t," "),m(l)]," ")},ScalarTypeExtension:{leave:({name:t,directives:l})=>i(["extend scalar",t,i(l," ")]," ")},ObjectTypeExtension:{leave:({name:t,interfaces:l,directives:y,fields:O})=>i(["extend type",t,E("implements ",i(l," & ")),i(y," "),m(O)]," ")},InterfaceTypeExtension:{leave:({name:t,interfaces:l,directives:y,fields:O})=>i(["extend interface",t,E("implements ",i(l," & ")),i(y," "),m(O)]," ")},UnionTypeExtension:{leave:({name:t,directives:l,types:y})=>i(["extend union",t,i(l," "),E("= ",i(y," | "))]," ")},EnumTypeExtension:{leave:({name:t,directives:l,values:y})=>i(["extend enum",t,i(l," "),m(y)]," ")},InputObjectTypeExtension:{leave:({name:t,directives:l,fields:y})=>i(["extend input",t,i(l," "),m(y)]," ")}};function i(t,l=""){var y;return(y=t==null?void 0:t.filter(O=>O).join(l))!==null&&y!==void 0?y:""}function m(t){return E(`{
`,d(i(t,`
`)),`
}`)}function E(t,l,y=""){return l!=null&&l!==""?t+l+y:""}function d(t){return E("  ",t.replace(/\n/g,`
  `))}function N(t){var l;return(l=t==null?void 0:t.some(y=>y.includes(`
`)))!==null&&l!==void 0?l:!1}return oe}var F={},we;function _t(){if(we)return F;we=1,Object.defineProperty(F,"__esModule",{value:!0}),F.isConstValueNode=u,F.isDefinitionNode=n,F.isExecutableDefinitionNode=c,F.isSelectionNode=r,F.isTypeDefinitionNode=E,F.isTypeExtensionNode=N,F.isTypeNode=i,F.isTypeSystemDefinitionNode=m,F.isTypeSystemExtensionNode=d,F.isValueNode=s;var e=ue();function n(t){return c(t)||m(t)||d(t)}function c(t){return t.kind===e.Kind.OPERATION_DEFINITION||t.kind===e.Kind.FRAGMENT_DEFINITION}function r(t){return t.kind===e.Kind.FIELD||t.kind===e.Kind.FRAGMENT_SPREAD||t.kind===e.Kind.INLINE_FRAGMENT}function s(t){return t.kind===e.Kind.VARIABLE||t.kind===e.Kind.INT||t.kind===e.Kind.FLOAT||t.kind===e.Kind.STRING||t.kind===e.Kind.BOOLEAN||t.kind===e.Kind.NULL||t.kind===e.Kind.ENUM||t.kind===e.Kind.LIST||t.kind===e.Kind.OBJECT}function u(t){return s(t)&&(t.kind===e.Kind.LIST?t.values.some(u):t.kind===e.Kind.OBJECT?t.fields.some(l=>u(l.value)):t.kind!==e.Kind.VARIABLE)}function i(t){return t.kind===e.Kind.NAMED_TYPE||t.kind===e.Kind.LIST_TYPE||t.kind===e.Kind.NON_NULL_TYPE}function m(t){return t.kind===e.Kind.SCHEMA_DEFINITION||E(t)||t.kind===e.Kind.DIRECTIVE_DEFINITION}function E(t){return t.kind===e.Kind.SCALAR_TYPE_DEFINITION||t.kind===e.Kind.OBJECT_TYPE_DEFINITION||t.kind===e.Kind.INTERFACE_TYPE_DEFINITION||t.kind===e.Kind.UNION_TYPE_DEFINITION||t.kind===e.Kind.ENUM_TYPE_DEFINITION||t.kind===e.Kind.INPUT_OBJECT_TYPE_DEFINITION}function d(t){return t.kind===e.Kind.SCHEMA_EXTENSION||N(t)}function N(t){return t.kind===e.Kind.SCALAR_TYPE_EXTENSION||t.kind===e.Kind.OBJECT_TYPE_EXTENSION||t.kind===e.Kind.INTERFACE_TYPE_EXTENSION||t.kind===e.Kind.UNION_TYPE_EXTENSION||t.kind===e.Kind.ENUM_TYPE_EXTENSION||t.kind===e.Kind.INPUT_OBJECT_TYPE_EXTENSION}return F}var Me;function gt(){return Me||(Me=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BREAK",{enumerable:!0,get:function(){return d.BREAK}}),Object.defineProperty(e,"DirectiveLocation",{enumerable:!0,get:function(){return l.DirectiveLocation}}),Object.defineProperty(e,"Kind",{enumerable:!0,get:function(){return s.Kind}}),Object.defineProperty(e,"Lexer",{enumerable:!0,get:function(){return i.Lexer}}),Object.defineProperty(e,"Location",{enumerable:!0,get:function(){return N.Location}}),Object.defineProperty(e,"OperationTypeNode",{enumerable:!0,get:function(){return N.OperationTypeNode}}),Object.defineProperty(e,"Source",{enumerable:!0,get:function(){return n.Source}}),Object.defineProperty(e,"Token",{enumerable:!0,get:function(){return N.Token}}),Object.defineProperty(e,"TokenKind",{enumerable:!0,get:function(){return u.TokenKind}}),Object.defineProperty(e,"getEnterLeaveForKind",{enumerable:!0,get:function(){return d.getEnterLeaveForKind}}),Object.defineProperty(e,"getLocation",{enumerable:!0,get:function(){return c.getLocation}}),Object.defineProperty(e,"getVisitFn",{enumerable:!0,get:function(){return d.getVisitFn}}),Object.defineProperty(e,"isConstValueNode",{enumerable:!0,get:function(){return t.isConstValueNode}}),Object.defineProperty(e,"isDefinitionNode",{enumerable:!0,get:function(){return t.isDefinitionNode}}),Object.defineProperty(e,"isExecutableDefinitionNode",{enumerable:!0,get:function(){return t.isExecutableDefinitionNode}}),Object.defineProperty(e,"isSelectionNode",{enumerable:!0,get:function(){return t.isSelectionNode}}),Object.defineProperty(e,"isTypeDefinitionNode",{enumerable:!0,get:function(){return t.isTypeDefinitionNode}}),Object.defineProperty(e,"isTypeExtensionNode",{enumerable:!0,get:function(){return t.isTypeExtensionNode}}),Object.defineProperty(e,"isTypeNode",{enumerable:!0,get:function(){return t.isTypeNode}}),Object.defineProperty(e,"isTypeSystemDefinitionNode",{enumerable:!0,get:function(){return t.isTypeSystemDefinitionNode}}),Object.defineProperty(e,"isTypeSystemExtensionNode",{enumerable:!0,get:function(){return t.isTypeSystemExtensionNode}}),Object.defineProperty(e,"isValueNode",{enumerable:!0,get:function(){return t.isValueNode}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return m.parse}}),Object.defineProperty(e,"parseConstValue",{enumerable:!0,get:function(){return m.parseConstValue}}),Object.defineProperty(e,"parseType",{enumerable:!0,get:function(){return m.parseType}}),Object.defineProperty(e,"parseValue",{enumerable:!0,get:function(){return m.parseValue}}),Object.defineProperty(e,"print",{enumerable:!0,get:function(){return E.print}}),Object.defineProperty(e,"printLocation",{enumerable:!0,get:function(){return r.printLocation}}),Object.defineProperty(e,"printSourceLocation",{enumerable:!0,get:function(){return r.printSourceLocation}}),Object.defineProperty(e,"visit",{enumerable:!0,get:function(){return d.visit}}),Object.defineProperty(e,"visitInParallel",{enumerable:!0,get:function(){return d.visitInParallel}});var n=Je(),c=fe(),r=ze(),s=ue(),u=Te(),i=et(),m=Ot(),E=It(),d=nt(),N=le(),t=_t(),l=tt()}(de)),de}var kt=gt();const xt=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,it=e=>typeof e!="string"||!xt.test(e)?!1:new Date(e).toISOString()===e,Ee="Date",rt=new g.GraphQLScalarType({name:Ee,description:"Date type",parseValue(e){return new Date(e)},serialize(e){return it(e)?e:e.toISOString()},parseLiteral(e){if(e.kind!==kt.Kind.STRING)throw new g.GraphQLError(`Query error: Can only parse dates strings, got a: ${e.kind}`,{nodes:[e]});if(Number.isNaN(Date.parse(e.value)))throw new g.GraphQLError("Query error: not a valid date",{nodes:[e]});return new Date(e.value)}}),St=e=>!Number.isNaN(Number.parseFloat(e))&&Number.isFinite(e),Ve=e=>e.every(St),bt=e=>Number.isInteger(e),Be=e=>e.every(bt),Lt=e=>typeof e=="boolean",Ge=e=>e.every(Lt),At=e=>typeof e=="string",Ue=e=>e.every(At),Dt=e=>Array.isArray(e),Ct=e=>e.every(Dt),Kt=e=>e instanceof Date||it(e),Rt=e=>e.every(Kt),Ft=e=>Object.prototype.toString.call(e)==="[object Object]",Qe=e=>e.every(Ft),C=(e,n)=>n?new g.GraphQLNonNull(e):e,st=(e,n=[],c=!1)=>{if(e==="id"||e.substr(e.length-3)==="_id")return C(g.GraphQLID,c);if(n.length>0){if(Ct(n)){const r=n.reduce((s,u)=>(u.forEach(i=>s.push(i)),s),[]);return Ge(r)?C(new g.GraphQLList(g.GraphQLBoolean),c):Ue(r)?C(new g.GraphQLList(g.GraphQLString),c):Be(r)?C(new g.GraphQLList(g.GraphQLInt),c):Ve(r)?C(new g.GraphQLList(g.GraphQLFloat),c):Qe(r)?C(pe.GraphQLJSON,c):C(new g.GraphQLList(g.GraphQLString),c)}if(Ge(n))return C(g.GraphQLBoolean,c);if(Rt(n))return C(rt,c);if(Ue(n))return C(g.GraphQLString,c);if(Be(n))return C(g.GraphQLInt,c);if(Ve(n))return C(g.GraphQLFloat,c);if(Qe(n))return C(pe.GraphQLJSON,c)}return C(g.GraphQLString,c)},ot=e=>e.reduce((n,c)=>{for(const r of Object.keys(c))n[r]||(n[r]=[]),c[r]!=null&&n[r].push(c[r]);return n},{}),ce=(e,n=!0)=>{const c=ot(e),r=e.length;return Object.keys(c).reduce((s,u)=>(s[u]={type:st(u,c[u],n?c[u].length===r:!1)},s),{})},Pt=e=>K.camelize(e),J=e=>K.camelize(K.singularize(e)),jt=e=>K.pluralize(e.substr(0,e.length-3)),wt=e=>`${K.singularize(e)}_id`,at=e=>J(e.substr(0,e.length-3)),Mt=e=>Object.keys(e).map(n=>({name:K.camelize(K.singularize(n)),fields:ce(e[n])})).map(n=>new g.GraphQLObjectType(n)),Vt=e=>{const n=ot(e);return Object.keys(n).reduce((c,r)=>{const s=st(r,n[r],!1);return g.isListType(s)||((s===g.GraphQLInt||s===g.GraphQLFloat||s===g.GraphQLString||s.name===Ee)&&(c[`${r}_lt`]={type:s},c[`${r}_lte`]={type:s},c[`${r}_gt`]={type:s},c[`${r}_gte`]={type:s}),s!==g.GraphQLBoolean&&(c[`${r}_neq`]={type:s})),c},{})},ct=e=>Object.keys(e).reduce((n,c)=>Object.assign({},n,{[J(c)]:new g.GraphQLInputObjectType({name:`${J(c)}Filter`,fields:Object.assign({q:{type:g.GraphQLString}},{ids:{type:new g.GraphQLList(g.GraphQLID)}},ce(e[c],!1),Vt(e[c]))})}),{}),ut=e=>e.endsWith("_id"),Bt=e=>{const n=Mt(e),c=n.reduce((d,N)=>(d[N.name]=N,d),{}),r=ct(e),s=new g.GraphQLObjectType({name:"ListMetadata",fields:{count:{type:g.GraphQLInt}}}),u=new g.GraphQLObjectType({name:"Query",fields:n.reduce((d,N)=>(d[N.name]={type:c[N.name],args:{id:{type:new g.GraphQLNonNull(g.GraphQLID)}}},d[`all${K.camelize(K.pluralize(N.name))}`]={type:new g.GraphQLList(c[N.name]),args:{page:{type:g.GraphQLInt},perPage:{type:g.GraphQLInt},sortField:{type:g.GraphQLString},sortOrder:{type:g.GraphQLString},filter:{type:r[N.name]}}},d[`_all${K.camelize(K.pluralize(N.name))}Meta`]={type:s,args:{page:{type:g.GraphQLInt},perPage:{type:g.GraphQLInt},filter:{type:r[N.name]}}},d),{})}),i=new g.GraphQLObjectType({name:"Mutation",fields:n.reduce((d,N)=>{const t=c[N.name].getFields(),l=Object.keys(t).reduce((f,T)=>(f[T]=Object.assign({},t[T],{type:T!=="id"&&t[T].type instanceof g.GraphQLNonNull?t[T].type.ofType:t[T].type}),f),{}),{id:y,...O}=t,o=Object.keys(O).reduce((f,T)=>(f[T]=Object.assign({},O[T]),delete f[T].resolve,f),{}),a=new g.GraphQLInputObjectType({name:`${N.name}Input`,fields:o});return d[`create${N.name}`]={type:c[N.name],args:O},d[`createMany${N.name}`]={type:new g.GraphQLList(c[N.name]),args:{data:{type:new g.GraphQLList(a)}}},d[`update${N.name}`]={type:c[N.name],args:l},d[`remove${N.name}`]={type:c[N.name],args:{id:{type:new g.GraphQLNonNull(g.GraphQLID)}}},d[`delete${N.name}`]={type:c[N.name],args:{id:{type:new g.GraphQLNonNull(g.GraphQLID)}}},d},{})}),m=new g.GraphQLSchema({query:u,mutation:i}),E=Object.values(c).reduce((d,N)=>{let t=`${d}`;for(const l of Object.keys(N.getFields()).filter(ut)){const y=at(l),O=K.pluralize(N.toString());t=`${t}
    extend type ${N} { ${y}: ${y} }
    extend type ${y} { ${O}: [${N}] }`}return t},"");return E?g.extendSchema(m,g.parse(E)):m},lt=(e=[],n={})=>{let c=[...e];return n.ids?c=c.filter(r=>n.ids.some(s=>s==r.id)):(Object.keys(n).filter(r=>r!=="q").forEach(r=>{if(r.indexOf("_neq")!==-1){const s=r.replace(/(_neq)$/,"");c=c.filter(u=>n[r]instanceof Date&&typeof u[s]=="string"?u[s]!=n[r].toISOString():u[s]!=n[r]);return}if(r.indexOf("_lte")!==-1){const s=r.replace(/(_lte)$/,"");c=c.filter(u=>n[r]instanceof Date&&typeof u[s]=="string"?u[s]<=n[r].toISOString():u[s]<=n[r]);return}if(r.indexOf("_gte")!==-1){const s=r.replace(/(_gte)$/,"");c=c.filter(u=>n[r]instanceof Date&&typeof u[s]=="string"?u[s]>=n[r].toISOString():u[s]>=n[r]);return}if(r.indexOf("_lt")!==-1){const s=r.replace(/(_lt)$/,"");c=c.filter(u=>n[r]instanceof Date&&typeof u[s]=="string"?u[s]<n[r].toISOString():u[s]<n[r]);return}if(r.indexOf("_gt")!==-1){const s=r.replace(/(_gt)$/,"");c=c.filter(u=>n[r]instanceof Date&&typeof u[s]=="string"?u[s]>n[r].toISOString():u[s]>n[r]);return}Array.isArray(n[r])?c=c.filter(s=>Array.isArray(s[r])?n[r].every(u=>s[r].some(i=>u instanceof Date&&typeof i=="string"?i==u.toISOString():i==u)):n[r].filter(u=>u instanceof Date&&typeof s[r]=="string"?s[r]==u.toISOString():u==s[r]).length>0):c=c.filter(s=>n[r]instanceof Date&&typeof s[r]=="string"?s[r]==n[r].toISOString():n[r]instanceof Date?+s[r]==+n[r]:s[r]==n[r])}),n.q&&(c=c.filter(r=>Object.keys(r).some(s=>{var u;return(u=r[s])==null?void 0:u.toString().toLowerCase().includes(n.q.toLowerCase())})))),c},Gt=(e=[])=>(n,{sortField:c,sortOrder:r="asc",page:s,perPage:u=25,filter:i={}})=>{let m=[...e];if(c){const E=r.toLowerCase()=="asc"?1:-1;m=m.sort((d,N)=>d[c]>N[c]?E:d[c]<N[c]?-1*E:0)}return m=lt(m,i),s!==void 0&&u&&(m=m.slice(s*u,s*u+u)),m},Ut=e=>(n,{filter:c={}})=>({count:lt(e,c).length}),Qt=(e=[])=>(n,{id:c})=>e.find(r=>r.id==c),dt=(e=[])=>(n,c)=>{const r=e.length>0?e[e.length-1].id+1:0,s=Object.assign({},c,{id:c.id??r});return e.push(s),s},$t=(e=[])=>(n,c)=>c.data.map(r=>dt(e)(null,r)),qt=(e=[])=>(n,c)=>{let r;if(c.id!=null){const s=c.id.toString(),u=e.findIndex(i=>i.id!=null&&i.id.toString()===s);u!==-1&&(e[u]=Object.assign({},e[u],c),r=e[u])}return r},$e=(e=[])=>(n,{id:c})=>{let r;if(c!=null){const s=c.toString(),u=e.findIndex(i=>i.id!=null&&i.id.toString()===s);u!==-1&&(r=e.splice(u,1)[0])}return r},Yt=(e,n)=>{const r=Object.keys(ce(n[e])).filter(ut).reduce((E,d)=>Object.assign({},E,{[at(d)]:N=>n[jt(d)].find(t=>t.id==N[d])}),{}),s=wt(e),u=E=>Object.keys(ce(n[E])).includes(s),m=Object.keys(n).filter(u).reduce((E,d)=>Object.assign({},E,{[Pt(d)]:N=>n[d].filter(t=>t[s]==N.id)}),{});return Object.assign({},r,m)},qe=(e,n)=>Object.values(ct(n)).reduce((c,r)=>c?!0:Object.values(r.getFields()).reduce((s,u)=>s?!0:u.type.name==e,!1),!1),Jt=(e,n)=>({[`all${K.pluralize(e)}`]:Gt(n),[`_all${K.pluralize(e)}Meta`]:Ut(n),[e]:Qt(n)}),zt=(e,n)=>({[`create${e}`]:dt(n),[`createMany${e}`]:$t(n),[`update${e}`]:qt(n),[`remove${e}`]:$e(n),[`delete${e}`]:$e(n)}),Xt=e=>Object.assign({},{Query:Object.keys(e).reduce((n,c)=>Object.assign({},n,Jt(J(c),e[c])),{}),Mutation:Object.keys(e).reduce((n,c)=>Object.assign({},n,zt(J(c),e[c])),{})},Object.keys(e).reduce((n,c)=>Object.assign({},n,{[J(c)]:Yt(c,e)}),{}),qe(Ee,e)?{Date:rt}:{},qe("JSON",e)?{JSON:pe.GraphQLJSON}:{}),pt=e=>Tt.makeExecutableSchema({typeDefs:g.printSchema(Bt(e)),resolvers:Xt(e)});function Ht(e){const n=pt(e);return(c,r={})=>{let s=r.body;c.requestBody&&(s=c.requestBody);const u=JSON.parse(s);return g.graphql({schema:n,source:u.query,variableValues:u.variables}).then(i=>({status:200,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),i=>({status:500,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}))}}function ht({data:e,url:n}){const c=Ht(e);return{start(){H.setup(),H.post(n,(r,s)=>new Promise(u=>{c(n,{body:r.body()}).then(i=>{s.status(i.status),s.headers(i.headers),s.body(i.body),u(s)})})),H.use(H.proxy)},stop(){H.teardown()},getHandler(){return c}}}typeof window<"u"&&(window.JsonGraphqlServer=ht,window.jsonSchemaBuilder=pt);module.exports=ht;
//# sourceMappingURL=json-graphql-server.cjs.map
